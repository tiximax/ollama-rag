/***** Base *****/
body { font-family: system-ui, Arial, sans-serif; margin: 0; background: #0b1220; color: #e2e8f0; }
:root{
  --bg:#0b1220; --panel:#0f172a; --border:#22324e; --muted:#94a3b8; --text:#e2e8f0; --primary:#3b82f6; --danger:#ef4444;
}

/***** Layout *****/
.ui-root { height: 100vh; display: flex; flex-direction: column; }
.menubar { display:flex; gap:16px; align-items:center; padding:8px 14px; border-bottom:1px solid var(--border); background:#0b1324; position: sticky; top: 0; z-index: 11; }
.menubar .menu-item { color: var(--muted); cursor: default; }
.topbar { display: flex; justify-content: space-between; gap: 12px; padding: 10px 14px; border-bottom: 1px solid var(--border); background: #0e1526; position: sticky; top: 37px; z-index: 10; }
.topbar .label { color: var(--muted); margin-right: 6px; }
.topbar .control { background: var(--panel); border: 1px solid var(--border); color: var(--text); border-radius: 6px; padding: 8px 10px; }
.topbar .control.wide { width: 360px; }
.topbar .btn { background: #1e293b; border: 1px solid var(--border); color: var(--text); border-radius: 6px; padding: 8px 12px; cursor: pointer; }
.topbar .btn.danger { background: #3a1b1b; border-color: #512525; color: #fecaca; }
.topbar .btn.file { position: relative; overflow: hidden; }
.topbar .btn.file input[type=file] { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
.topbar .left, .topbar .right { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.status { color: var(--muted); margin-left: 8px; }
.status.badge { padding: 2px 6px; border-radius: 6px; margin-left: 8px; font-size: 12px; }
.status.ok { background: #e7f7ee; color: #0b8a3b; border: 1px solid #0b8a3b22; }
.status.warning { background: #fff8e6; color: #b7791f; border: 1px solid #b7791f22; }
.status.error { background: #fde8e8; color: #b91c1c; border: 1px solid #b91c1c22; }
.tooltip { cursor: help; border-bottom: 1px dotted #999; }

.workspace { flex: 1; display: grid; grid-template-columns: 320px 1fr; gap: 0; min-height: 0; }
.sidebar { border-right: 1px solid var(--border); background: #0e1526; padding: 12px; overflow: auto; }
.main { display: flex; flex-direction: column; padding: 12px; min-width: 0; }

/***** Panels *****/
.panel { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 10px; margin-bottom: 12px; }

/***** Modal *****/
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(2px); }
.modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: min(560px, 92vw); background: #0e1526; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); }
.modal-header, .modal-footer { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid var(--border); }
.modal-footer { border-top: 1px solid var(--border); border-bottom: none; }
.modal-title { font-weight: 600; }
.modal-body { padding: 12px; display: flex; flex-direction: column; gap: 12px; }
.form-row { display: flex; gap: 8px; align-items: center; }
.form-row label { color: var(--muted); min-width: 180px; }
.panel-title { font-weight: 600; color: #cbd5e1; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.panel-actions { margin-top: 8px; display:flex; gap: 8px; }

/***** Lists *****/
.list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 6px; }
.list li { display: flex; align-items: center; gap: 8px; padding: 6px 8px; border: 1px solid var(--border); border-radius: 8px; background: #0c1629; }
.list li .title { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: var(--text); }
.list li.empty { justify-content: center; }
.muted { color: var(--muted); }
.hint { color: var(--muted); margin-left: 4px; cursor: help; font-size: 12px; user-select: none; }

/***** Buttons and inputs *****/
.btn { background: #1e293b; border: 1px solid var(--border); color: var(--text); border-radius: 8px; padding: 10px 12px; cursor: pointer; }
.btn[disabled] { opacity: 0.6; cursor: not-allowed; }
.btn.primary { background: #1d4ed8; border-color: #1d4ed8; }
.btn.danger { background: #7f1d1d; border-color: #7f1d1d; }
.btn.full { width: 100%; }
.control { background: var(--panel); border: 1px solid var(--border); color: var(--text); border-radius: 6px; padding: 8px 10px; }
.opt { display: flex; gap: 6px; align-items: center; color: var(--muted); }

/***** Chat area *****/
.query-row { display: flex; gap: 8px; align-items: center; padding: 8px 0; border-top: 1px solid var(--border); }
.query-input { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid var(--border); background: #0e1526; color: var(--text); }
.result { white-space: pre-wrap; background: #0e1526; border: 1px solid var(--border); border-radius: 8px; padding: 12px; min-height: 64px; }
.contexts { margin-top: 12px; display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 8px; }
.ctx { background: #0e1526; border: 1px solid var(--border); border-radius: 8px; padding: 8px; }
.citations { margin-top: 12px; background: #0e1526; border: 1px solid var(--border); border-radius: 8px; padding: 8px; }
.citations-title { font-weight: bold; margin-bottom: 6px; color: #cbd5e1; }
.citation { color: var(--muted); }
.footer { margin-top: auto; color: var(--muted); }
.adv-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px; align-items: center; }
.adv-grid .opt { gap: 8px; }

/* Legacy rules kept for JS logic compatibility */
.query input[type="number"] { width: 64px; padding: 8px; border-radius: 6px; border: 1px solid var(--border); background: #0e1526; color: var(--text); }

/***** Toasts *****/
.toasts { position: fixed; top: 14px; right: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
.toast { min-width: 260px; max-width: 480px; padding: 10px 12px; border-radius: 8px; border: 1px solid var(--border); background: #0e1526; color: var(--text); box-shadow: 0 6px 20px rgba(0,0,0,0.35); opacity: 0.98; }
.toast.success { border-color: #0b8a3b55; background: #0f2c1b; color: #c8f5d6; }
.toast.error { border-color: #b91c1c55; background: #2a1212; color: #fecaca; }
.toast.warn { border-color: #b7791f55; background: #2a1f0f; color: #fde68a; }
.toast.info { border-color: #1d4ed855; background: #0f1d36; color: #bfdbfe; }
.toast .close { float: right; cursor: pointer; margin-left: 8px; opacity: 0.8; }
.toast .close:hover { opacity: 1; }
