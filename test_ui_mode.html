<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Test UI Mode Toggle</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      padding: 20px;
      background: #0f172a;
      color: #e2e8f0;
    }
    .test-section {
      background: #1e293b;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border: 2px solid #334155;
    }
    h1 { color: #3b82f6; }
    h2 { color: #10b981; margin-top: 0; }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 8px 8px 8px 0;
    }
    button:hover { background: #2563eb; }
    .success { background: #10b981; }
    .success:hover { background: #059669; }
    code {
      background: #0b1220;
      padding: 2px 6px;
      border-radius: 4px;
      color: #fbbf24;
    }
    .checklist {
      list-style: none;
      padding-left: 0;
    }
    .checklist li {
      padding: 8px;
      margin: 4px 0;
      background: #0b1220;
      border-radius: 4px;
    }
    .checklist li:before {
      content: "â˜ ";
      color: #94a3b8;
      margin-right: 8px;
    }
    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-weight: bold;
      margin-left: 8px;
    }
    .status.pending { background: #f59e0b; color: black; }
    .status.passed { background: #10b981; color: white; }
    .status.failed { background: #ef4444; color: white; }
  </style>
</head>
<body>
  <h1>ğŸ§ª Test UI Mode Toggle - Ollama RAG</h1>

  <div class="test-section">
    <h2>ğŸ“‹ Checklist Test Manual</h2>
    <ul class="checklist">
      <li>Má»Ÿ app táº¡i <code>http://localhost:8000</code></li>
      <li>Báº¥m nÃºt <code>ğŸ§­ ÄÆ¡n giáº£n</code> â†’ UI pháº£i Ä‘Æ¡n giáº£n hÃ³a (áº©n nhiá»u panels)</li>
      <li>Kiá»ƒm tra cÃ¡c pháº§n tá»­ sau Bá»Š áº¨N:
        <ul>
          <li><code>#db-new-name</code>, <code>#btn-db-create</code>, <code>#btn-db-delete</code></li>
          <li><code>#ingest-paths</code>, <code>#btn-ingest-paths</code>, file upload buttons</li>
          <li><code>#panel-docs</code> (tÃ i liá»‡u trong DB)</li>
          <li><code>#panel-stats</code> (thá»‘ng kÃª nhanh)</li>
          <li><code>#panel-advanced</code> (tÃ¹y chá»n nÃ¢ng cao)</li>
          <li>Táº¥t cáº£ <code>.opt</code> trong query-row (top-k, save chat, provider...)</li>
        </ul>
      </li>
      <li>CÃ¡c pháº§n tá»­ sau váº«n HIá»‚N THá»Š:
        <ul>
          <li><code>#txt-query</code> (input cÃ¢u há»i)</li>
          <li><code>#btn-ask</code> (nÃºt gá»­i)</li>
          <li><code>#btn-ui-mode</code> (nÃºt toggle)</li>
          <li><code>#btn-reload</code></li>
          <li>DB selector, Chat history panel</li>
        </ul>
      </li>
      <li>Báº¥m láº¡i nÃºt â†’ chuyá»ƒn thÃ nh <code>ğŸ§° NÃ¢ng cao</code> â†’ UI hiá»‡n Ä‘áº§y Ä‘á»§</li>
      <li>Toast notification hiá»‡n "Cháº¿ Ä‘á»™ ... Ä‘Ã£ báº­t"</li>
      <li>Reload trang â†’ preference Ä‘Æ°á»£c lÆ°u (váº«n á»Ÿ mode Ä‘Ã£ chá»n)</li>
      <li>Test trÃªn mobile (F12 â†’ Toggle device toolbar â†’ iPhone SE)</li>
      <li>Thá»­ query cÃ¢u há»i á»Ÿ cáº£ 2 modes â†’ pháº£i hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng</li>
    </ul>
  </div>

  <div class="test-section">
    <h2>ğŸš€ Quick Actions</h2>
    <button onclick="window.open('http://localhost:8000', '_blank')">Má»Ÿ App</button>
    <button class="success" onclick="testDevTools()">Má»Ÿ DevTools Test</button>
    <button onclick="testLocalStorage()">Test localStorage</button>
  </div>

  <div class="test-section" id="results">
    <h2>ğŸ“Š Test Results</h2>
    <p>ChÆ°a cÃ³ káº¿t quáº£. HÃ£y test manual theo checklist á»Ÿ trÃªn! ğŸ‘†</p>
  </div>

  <script>
    function testDevTools() {
      const code = `
// Test UI Mode trong DevTools
console.clear();
console.log('ğŸ§ª Testing UI Mode Toggle...');

// 1. Check nÃºt toggle tá»“n táº¡i
const btn = document.getElementById('btn-ui-mode');
console.log('âœ“ Button exists:', !!btn);

// 2. Toggle mode
btn?.click();
setTimeout(() => {
  const root = document.querySelector('.ui-root');
  const isSimple = root?.classList.contains('simple-mode');
  console.log('âœ“ Simple mode active:', isSimple);

  // 3. Check áº©n/hiá»‡n elements
  const hiddenEls = [
    '#db-new-name', '#btn-db-create', '#btn-db-delete',
    '#ingest-paths', '#panel-docs', '#panel-stats', '#panel-advanced'
  ];

  hiddenEls.forEach(sel => {
    const el = document.querySelector(sel);
    const isHidden = el && window.getComputedStyle(el).display === 'none';
    console.log(isHidden ? 'âœ“' : 'âœ—', sel, 'hidden:', isHidden);
  });

  // 4. Check localStorage
  const saved = localStorage.getItem('ollama-rag-ui-mode');
  console.log('âœ“ localStorage saved:', saved);

  console.log('\\nğŸ‰ Test completed! Check logs above.');
}, 500);
`;

      alert('Copy Ä‘oáº¡n code sau vÃ  paste vÃ o DevTools Console cá»§a http://localhost:8000:\\n\\n' + code);
      navigator.clipboard.writeText(code).then(() => {
        alert('âœ… ÄÃ£ copy vÃ o clipboard! Giá»:\\n1. Má»Ÿ http://localhost:8000\\n2. F12 má»Ÿ DevTools\\n3. Paste code vÃ o Console\\n4. Enter Ä‘á»ƒ cháº¡y');
      });
    }

    function testLocalStorage() {
      const key = 'ollama-rag-ui-mode';
      const val = localStorage.getItem(key);
      const results = document.getElementById('results');

      if (val) {
        results.innerHTML = `
          <h2>ğŸ“Š localStorage Test</h2>
          <p>âœ… Key: <code>${key}</code></p>
          <p>âœ… Value: <code>${val}</code></p>
          <p>App Ä‘Ã£ lÆ°u preference UI mode thÃ nh cÃ´ng!</p>
        `;
      } else {
        results.innerHTML = `
          <h2>ğŸ“Š localStorage Test</h2>
          <p>âš ï¸ ChÆ°a cÃ³ data. HÃ£y má»Ÿ app vÃ  toggle UI mode trÆ°á»›c!</p>
        `;
      }
    }

    // Auto-check on load
    window.addEventListener('load', () => {
      setTimeout(testLocalStorage, 500);
    });
  </script>
</body>
</html>
